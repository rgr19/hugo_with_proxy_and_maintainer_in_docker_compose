<!DOCTYPE html>
<html dir="ltr" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="author" content="Canonical">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#E95420">
    <link rel="search" type="application/opensearchdescription+xml" href="http://manpages.ubuntu.com/ubuntu-manpage-search.xml" title="Ubuntu Manpage Search">
    <title>Ubuntu Manpage:

       systemd.service - Service unit configuration
    </title>
    <link rel="stylesheet" href="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/vanilla-framework-version-1.css">
    <link rel="stylesheet" href="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/styles.css">
    <link rel="icon" type="image/png" href="https://assets.ubuntu.com/v1/cb22ba5d-favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="https://assets.ubuntu.com/v1/49a1a858-favicon-32x32.png" sizes="32x32">
    <link rel="apple-touch-icon" sizes="144x144" href="https://assets.ubuntu.com/v1/3361409d-apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://assets.ubuntu.com/v1/5fe4d3c8-apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://assets.ubuntu.com/v1/09460d9a-apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" href="https://assets.ubuntu.com/v1/cc66da65-apple-touch-icon.png">
  </head>
  <body>
    <header id="navigation" class="p-navigation">
      <div class="row">
        <div class="p-navigation__banner">
          <div class="p-navigation__logo">
            <a class="p-navigation__link" href="http://manpages.ubuntu.com/">
              <img class="p-navigation__image" src="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/b93fecb3-ubuntu-manuals-lockup.svg" alt="">
            </a>
          </div>
          <a href="#navigation" class="p-navigation__toggle--open" title="menu">Menu</a>
          <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">Close menu</a>
        </div>
        <nav class="p-navigation__nav" role="menubar">
          <form class="p-search-box" method="get" action="/cgi-bin/search.py" id="cse-search-box">
            <input class="p-search-box__input" name="q" placeholder="Custom Search" required="" type="search" style="background: rgb(255, 255, 255) url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) no-repeat scroll left center; text-indent: 48px;">
            <button type="reset" class="p-search-box__reset" alt="reset"><i class="p-icon--close"></i></button>
            <button type="submit" class="p-search-box__button" alt="search"><i class="p-icon--search"></i></button>
            <input type="hidden" name="cx" value="003883529982892832976:5zl6o8w6f0s">
            <input type="hidden" name="cof" value="FORID:9">
            <input type="hidden" name="ie" value="UTF-8">
            <script type="text/javascript" src="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/brand"></script><input name="siteurl" type="hidden" value="manpages.ubuntu.com/manpages/bionic/man5/systemd.service.5.html"><input name="ref" type="hidden" value="manpages.ubuntu.com/manpages/xenial/man5/systemd.service.5.html"><input name="ss" type="hidden">
          </form>
          <span class="u-off-screen">
            <a href="#main-content">Jump to main content</a>
          </span>
          <ul class="p-navigation__links" role="menu" id="navigation-container"><li class="p-navigation__link is-active"><a href="http://manpages.ubuntu.com/manpages/trusty/man5/systemd.service.5.html">14.04 LTS</a></li><li class="p-navigation__link is-active"><a href="http://manpages.ubuntu.com/manpages/xenial/man5/systemd.service.5.html">16.04 LTS</a></li><li class="p-navigation__link is-active is-selected"><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.service.5.html">18.04 LTS</a></li><li class="p-navigation__link is-active"><a href="http://manpages.ubuntu.com/manpages/disco/man5/systemd.service.5.html">19.04</a></li><li class="p-navigation__link is-active"><a href="http://manpages.ubuntu.com/manpages/eoan/man5/systemd.service.5.html">19.10</a></li></ul>
        </nav>
      </div>
    </header>
    <div id="main-content">
      <section class="p-strip is-bordered">
        <div class="row">
          <div class="col-3 u-hide--small" id="toc"><ul class="p-list--divided"><li class="p-list__item"><a href="#name">name</a></li><li class="p-list__item"><a href="#synopsis">synopsis</a></li><li class="p-list__item"><a href="#description">description</a></li><li class="p-list__item"><a href="#implicit dependencies">implicit dependencies</a></li><li class="p-list__item"><a href="#default dependencies">default dependencies</a></li><li class="p-list__item"><a href="#options">options</a></li><li class="p-list__item"><a href="#command lines">command lines</a></li><li class="p-list__item"><a href="#examples">examples</a></li><li class="p-list__item"><a href="#see also">see also</a></li><li class="p-list__item"><a href="#notes">notes</a></li></ul></div>
          <div id="tableWrapper" class="col-9">
            <p id="distroAndSection"><a href="http://manpages.ubuntu.com/manpages/bionic/">bionic</a> (<a href="http://manpages.ubuntu.com/manpages/bionic/man5">5</a>) <a href="http://manpages.ubuntu.com/manpages.gz/bionic/man5/systemd.service.5.gz">systemd.service.5.gz</a><br></p>

Provided by: <a href="https://launchpad.net/ubuntu/bionic/+package/systemd">systemd_237-3ubuntu10_amd64</a> <a href="https://bugs.launchpad.net/ubuntu/+source/systemd/+filebug-advanced" title="Report a bug in the content of this documentation"><img src="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/bug.png" alt="bug" border="0"></a><br><br><pre></pre><h4 id="name"><b>NAME</b></h4><pre>       systemd.service - Service unit configuration

</pre><h4 id="synopsis"><b>SYNOPSIS</b></h4><pre>       <u>service</u>.service

</pre><h4 id="description"><b>DESCRIPTION</b></h4><pre>       A unit configuration file whose name ends in .service encodes information about a process
       controlled and supervised by systemd.

       This man page lists the configuration options specific to this unit type. See
       <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.unit.5.html">systemd.unit</a></b>(5) for the common options of all unit configuration files. The common
       configuration items are configured in the generic "[Unit]" and "[Install]" sections. The
       service specific configuration options are configured in the "[Service]" section.

       Additional options are listed in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5), which define the execution environment
       the commands are executed in, and in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5), which define the way the processes
       of the service are terminated, and in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5), which configure
       resource control settings for the processes of the service.

       If a service is requested under a certain name but no unit configuration file is found,
       systemd looks for a SysV init script by the same name (with the .service suffix removed)
       and dynamically creates a service unit from that script. This is useful for compatibility
       with SysV. Note that this compatibility is quite comprehensive but not 100%. For details
       about the incompatibilities, see the <b>Incompatibilities</b> <b>with</b> <b>SysV</b>[1] document.

</pre><h4 id="implicit dependencies"><b>IMPLICIT</b> <b>DEPENDENCIES</b></h4><pre>       The following dependencies are implicitly added:

       ·   Services with <u>Type=dbus</u> set automatically acquire dependencies of type <u>Requires=</u> and
           <u>After=</u> on dbus.socket.

       ·   Socket activated services are automatically ordered after their activating .socket
           units via an automatic <u>After=</u> dependency. Services also pull in all .socket units
           listed in <u>Sockets=</u> via automatic <u>Wants=</u> and <u>After=</u> dependencies.

       Additional implicit dependencies may be added as result of execution and resource control
       parameters as documented in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5) and <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5).

</pre><h4 id="default dependencies"><b>DEFAULT</b> <b>DEPENDENCIES</b></h4><pre>       The following dependencies are added unless <u>DefaultDependencies=no</u> is set:

       ·   Service units will have dependencies of type <u>Requires=</u> and <u>After=</u> on sysinit.target, a
           dependency of type <u>After=</u> on basic.target as well as dependencies of type <u>Conflicts=</u>
           and <u>Before=</u> on shutdown.target. These ensure that normal service units pull in basic
           system initialization, and are terminated cleanly prior to system shutdown. Only
           services involved with early boot or late system shutdown should disable this option.

       ·   Instanced service units (i.e. service units with an "@" in their name) are assigned by
           default a per-template slice unit (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.slice.5.html">systemd.slice</a></b>(5)), named after the template
           unit, containing all instances of the specific template. This slice is normally
           stopped at shutdown, together with all template instances. If that is not desired, set
           <u>DefaultDependencies=no</u> in the template unit, and either define your own per-template
           slice unit file that also sets <u>DefaultDependencies=no</u>, or set <u>Slice=system.slice</u> (or
           another suitable slice) in the template unit. Also see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5).

</pre><h4 id="options"><b>OPTIONS</b></h4><pre>       Service files must include a "[Service]" section, which carries information about the
       service and the process it supervises. A number of options that may be used in this
       section are shared with other unit types. These options are documented in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5),
       <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) and <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5). The options specific to the "[Service]"
       section of service units are the following:

       <u>Type=</u>
           Configures the process start-up type for this service unit. One of <b>simple</b>, <b>forking</b>,
           <b>oneshot</b>, <b>dbus</b>, <b>notify</b> or <b>idle</b>.

           If set to <b>simple</b> (the default if neither <u>Type=</u> nor <u>BusName=</u>, but <u>ExecStart=</u> are
           specified), it is expected that the process configured with <u>ExecStart=</u> is the main
           process of the service. In this mode, if the process offers functionality to other
           processes on the system, its communication channels should be installed before the
           daemon is started up (e.g. sockets set up by systemd, via socket activation), as
           systemd will immediately proceed starting follow-up units.

           If set to <b>forking</b>, it is expected that the process configured with <u>ExecStart=</u> will
           call <b>fork()</b> as part of its start-up. The parent process is expected to exit when
           start-up is complete and all communication channels are set up. The child continues to
           run as the main daemon process. This is the behavior of traditional UNIX daemons. If
           this setting is used, it is recommended to also use the <u>PIDFile=</u> option, so that
           systemd can identify the main process of the daemon. systemd will proceed with
           starting follow-up units as soon as the parent process exits.

           Behavior of <b>oneshot</b> is similar to <b>simple</b>; however, it is expected that the process has
           to exit before systemd starts follow-up units.  <u>RemainAfterExit=</u> is particularly
           useful for this type of service. This is the implied default if neither <u>Type=</u> nor
           <u>ExecStart=</u> are specified.

           Behavior of <b>dbus</b> is similar to <b>simple</b>; however, it is expected that the daemon
           acquires a name on the D-Bus bus, as configured by <u>BusName=</u>. systemd will proceed with
           starting follow-up units after the D-Bus bus name has been acquired. Service units
           with this option configured implicitly gain dependencies on the dbus.socket unit. This
           type is the default if <u>BusName=</u> is specified.

           Behavior of <b>notify</b> is similar to <b>simple</b>; however, it is expected that the daemon sends
           a notification message via <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3) or an equivalent call when it has finished
           starting up. systemd will proceed with starting follow-up units after this
           notification message has been sent. If this option is used, <u>NotifyAccess=</u> (see below)
           should be set to open access to the notification socket provided by systemd. If
           <u>NotifyAccess=</u> is missing or set to <b>none</b>, it will be forcibly set to <b>main</b>. Note that
           currently <u>Type=</u><b>notify</b> will not work if used in combination with <u>PrivateNetwork=</u><b>yes</b>.

           Behavior of <b>idle</b> is very similar to <b>simple</b>; however, actual execution of the service
           program is delayed until all active jobs are dispatched. This may be used to avoid
           interleaving of output of shell services with the status output on the console. Note
           that this type is useful only to improve console output, it is not useful as a general
           unit ordering tool, and the effect of this service type is subject to a 5s time-out,
           after which the service program is invoked anyway.

       <u>RemainAfterExit=</u>
           Takes a boolean value that specifies whether the service shall be considered active
           even when all its processes exited. Defaults to <b>no</b>.

       <u>GuessMainPID=</u>
           Takes a boolean value that specifies whether systemd should try to guess the main PID
           of a service if it cannot be determined reliably. This option is ignored unless
           <b>Type=forking</b> is set and <b>PIDFile=</b> is unset because for the other types or with an
           explicitly configured PID file, the main PID is always known. The guessing algorithm
           might come to incorrect conclusions if a daemon consists of more than one process. If
           the main PID cannot be determined, failure detection and automatic restarting of a
           service will not work reliably. Defaults to <b>yes</b>.

       <u>PIDFile=</u>
           Takes an absolute path referring to the PID file of the service. Usage of this option
           is recommended for services where <u>Type=</u> is set to <b>forking</b>. The service manager will
           read the PID of the main process of the service from this file after start-up of the
           service. The service manager will not write to the file configured here, although it
           will remove the file after the service has shut down if it still exists. The PID file
           does not need to be owned by a privileged user, but if it is owned by an unprivileged
           user additional safety restrictions are enforced: the file may not be a symlink to a
           file owned by a different user (neither directly nor indirectly), and the PID file
           must refer to a process already belonging to the service.

       <u>BusName=</u>
           Takes a D-Bus bus name that this service is reachable as. This option is mandatory for
           services where <u>Type=</u> is set to <b>dbus</b>.

       <u>ExecStart=</u>
           Commands with their arguments that are executed when this service is started. The
           value is split into zero or more command lines according to the rules described below
           (see section "Command Lines" below).

           Unless <u>Type=</u> is <b>oneshot</b>, exactly one command must be given. When <u>Type=oneshot</u> is used,
           zero or more commands may be specified. Commands may be specified by providing
           multiple command lines in the same directive, or alternatively, this directive may be
           specified more than once with the same effect. If the empty string is assigned to this
           option, the list of commands to start is reset, prior assignments of this option will
           have no effect. If no <u>ExecStart=</u> is specified, then the service must have
           <u>RemainAfterExit=yes</u> and at least one <u>ExecStop=</u> line set. (Services lacking both
           <u>ExecStart=</u> and <u>ExecStop=</u> are not valid.)

           For each of the specified commands, the first argument must be an absolute path to an
           executable. Optionally, this filename may be prefixed with a number of special
           characters:

           <b>Table</b> <b>1.</b> <b>Special</b> <b>executable</b> <b>prefixes</b>
           ┌───────┬──────────────────────────────────┐
           │<b>Prefix</b> │ <b>Effect</b>                           │
           ├───────┼──────────────────────────────────┤
           │"@"    │ If the executable path is        │
           │       │ prefixed with "@", the second    │
           │       │ specified token will be passed   │
           │       │ as "argv[0]" to the executed     │
           │       │ process (instead of the actual   │
           │       │ filename), followed by the       │
           │       │ further arguments specified.     │
           ├───────┼──────────────────────────────────┤
           │"-"    │ If the executable path is        │
           │       │ prefixed with "-", an exit code  │
           │       │ of the command normally          │
           │       │ considered a failure (i.e.       │
           │       │ non-zero exit status or abnormal │
           │       │ exit due to signal) is ignored   │
           │       │ and considered success.          │
           ├───────┼──────────────────────────────────┤
           │"+"    │ If the executable path is        │
           │       │ prefixed with "+" then the       │
           │       │ process is executed with full    │
           │       │ privileges. In this mode         │
           │       │ privilege restrictions           │
           │       │ configured with <u>User=</u>, <u>Group=</u>,   │
           │       │ <u>CapabilityBoundingSet=</u> or the    │
           │       │ various file system namespacing  │
           │       │ options (such as                 │
           │       │ <u>PrivateDevices=</u>, <u>PrivateTmp=</u>)    │
           │       │ are not applied to the invoked   │
           │       │ command line (but still affect   │
           │       │ any other <u>ExecStart=</u>, <u>ExecStop=</u>, │
           │       │ ... lines).                      │
           ├───────┼──────────────────────────────────┤
           │"!"    │ Similar to the "+" character     │
           │       │ discussed above this permits     │
           │       │ invoking command lines with      │
           │       │ elevated privileges. However,    │
           │       │ unlike "+" the "!" character     │
           │       │ exclusively alters the effect of │
           │       │ <u>User=</u>, <u>Group=</u> and                │
           │       │ <u>SupplementaryGroups=</u>, i.e. only  │
           │       │ the stanzas the affect user and  │
           │       │ group credentials. Note that     │
           │       │ this setting may be combined     │
           │       │ with <u>DynamicUser=</u>, in which case │
           │       │ a dynamic user/group pair is     │
           │       │ allocated before the command is  │
           │       │ invoked, but credential changing │
           │       │ is left to the executed process  │
           │       │ itself.                          │
           ├───────┼──────────────────────────────────┤
           │"!!"   │ This prefix is very similar to   │
           │       │ "!", however it only has an      │
           │       │ effect on systems lacking        │
           │       │ support for ambient process      │
           │       │ capabilities, i.e. without       │
           │       │ support for                      │
           │       │ <u>AmbientCapabilities=</u>. It's       │
           │       │ intended to be used for unit     │
           │       │ files that take benefit of       │
           │       │ ambient capabilities to run      │
           │       │ processes with minimal           │
           │       │ privileges wherever possible     │
           │       │ while remaining compatible with  │
           │       │ systems that lack ambient        │
           │       │ capabilities support. Note that  │
           │       │ when "!!" is used, and a system  │
           │       │ lacking ambient capability       │
           │       │ support is detected any          │
           │       │ configured <u>SystemCallFilter=</u> and │
           │       │ <u>CapabilityBoundingSet=</u> stanzas   │
           │       │ are implicitly modified, in      │
           │       │ order to permit spawned          │
           │       │ processes to drop credentials    │
           │       │ and capabilities themselves,     │
           │       │ even if this is configured to    │
           │       │ not be allowed. Moreover, if     │
           │       │ this prefix is used and a system │
           │       │ lacking ambient capability       │
           │       │ support is detected              │
           │       │ <u>AmbientCapabilities=</u> will be     │
           │       │ skipped and not be applied. On   │
           │       │ systems supporting ambient       │
           │       │ capabilities, "!!" has no effect │
           │       │ and is redundant.                │
           └───────┴──────────────────────────────────┘
           "@", "-", and one of "+"/"!"/"!!"  may be used together and they can appear in any
           order. However, only one of "+", "!", "!!"  may be used at a time. Note that these
           prefixes are also supported for the other command line settings, i.e.  <u>ExecStartPre=</u>,
           <u>ExecStartPost=</u>, <u>ExecReload=</u>, <u>ExecStop=</u> and <u>ExecStopPost=</u>.

           If more than one command is specified, the commands are invoked sequentially in the
           order they appear in the unit file. If one of the commands fails (and is not prefixed
           with "-"), other lines are not executed, and the unit is considered failed.

           Unless <u>Type=forking</u> is set, the process started via this command line will be
           considered the main process of the daemon.

       <u>ExecStartPre=</u>, <u>ExecStartPost=</u>
           Additional commands that are executed before or after the command in <u>ExecStart=</u>,
           respectively. Syntax is the same as for <u>ExecStart=</u>, except that multiple command lines
           are allowed and the commands are executed one after the other, serially.

           If any of those commands (not prefixed with "-") fail, the rest are not executed and
           the unit is considered failed.

           <u>ExecStart=</u> commands are only run after all <u>ExecStartPre=</u> commands that were not
           prefixed with a "-" exit successfully.

           <u>ExecStartPost=</u> commands are only run after the commands specified in <u>ExecStart=</u> have
           been invoked successfully, as determined by <u>Type=</u> (i.e. the process has been started
           for <u>Type=simple</u> or <u>Type=idle</u>, the last <u>ExecStart=</u> process exited successfully for
           <u>Type=oneshot</u>, the initial process exited successfully for <u>Type=forking</u>, "READY=1" is
           sent for <u>Type=notify</u>, or the <u>BusName=</u> has been taken for <u>Type=dbus</u>).

           Note that <u>ExecStartPre=</u> may not be used to start long-running processes. All processes
           forked off by processes invoked via <u>ExecStartPre=</u> will be killed before the next
           service process is run.

           Note that if any of the commands specified in <u>ExecStartPre=</u>, <u>ExecStart=</u>, or
           <u>ExecStartPost=</u> fail (and are not prefixed with "-", see above) or time out before the
           service is fully up, execution continues with commands specified in <u>ExecStopPost=</u>, the
           commands in <u>ExecStop=</u> are skipped.

       <u>ExecReload=</u>
           Commands to execute to trigger a configuration reload in the service. This argument
           takes multiple command lines, following the same scheme as described for <u>ExecStart=</u>
           above. Use of this setting is optional. Specifier and environment variable
           substitution is supported here following the same scheme as for <u>ExecStart=</u>.

           One additional, special environment variable is set: if known, <u>$MAINPID</u> is set to the
           main process of the daemon, and may be used for command lines like the following:

               <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?kill">/bin/kill</a> -HUP $MAINPID

           Note however that reloading a daemon by sending a signal (as with the example line
           above) is usually not a good choice, because this is an asynchronous operation and
           hence not suitable to order reloads of multiple services against each other. It is
           strongly recommended to set <u>ExecReload=</u> to a command that not only triggers a
           configuration reload of the daemon, but also synchronously waits for it to complete.

       <u>ExecStop=</u>
           Commands to execute to stop the service started via <u>ExecStart=</u>. This argument takes
           multiple command lines, following the same scheme as described for <u>ExecStart=</u> above.
           Use of this setting is optional. After the commands configured in this option are run,
           it is implied that the service is stopped, and any processes remaining for it are
           terminated according to the <u>KillMode=</u> setting (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5)). If this option is
           not specified, the process is terminated by sending the signal specified in
           <u>KillSignal=</u> when service stop is requested. Specifier and environment variable
           substitution is supported (including <u>$MAINPID</u>, see above).

           Note that it is usually not sufficient to specify a command for this setting that only
           asks the service to terminate (for example, by queuing some form of termination signal
           for it), but does not wait for it to do so. Since the remaining processes of the
           services are killed according to <u>KillMode=</u> and <u>KillSignal=</u> as described above
           immediately after the command exited, this may not result in a clean stop. The
           specified command should hence be a synchronous operation, not an asynchronous one.

           Note that the commands specified in <u>ExecStop=</u> are only executed when the service
           started successfully first. They are not invoked if the service was never started at
           all, or in case its start-up failed, for example because any of the commands specified
           in <u>ExecStart=</u>, <u>ExecStartPre=</u> or <u>ExecStartPost=</u> failed (and weren't prefixed with "-",
           see above) or timed out. Use <u>ExecStopPost=</u> to invoke commands when a service failed to
           start up correctly and is shut down again. Also note that, service restart requests
           are implemented as stop operations followed by start operations. This means that
           <u>ExecStop=</u> and <u>ExecStopPost=</u> are executed during a service restart operation.

           It is recommended to use this setting for commands that communicate with the service
           requesting clean termination. When the commands specified with this option are
           executed it should be assumed that the service is still fully up and is able to react
           correctly to all commands. For post-mortem clean-up steps use <u>ExecStopPost=</u> instead.

       <u>ExecStopPost=</u>
           Additional commands that are executed after the service is stopped. This includes
           cases where the commands configured in <u>ExecStop=</u> were used, where the service does not
           have any <u>ExecStop=</u> defined, or where the service exited unexpectedly. This argument
           takes multiple command lines, following the same scheme as described for <u>ExecStart=</u>.
           Use of these settings is optional. Specifier and environment variable substitution is
           supported. Note that – unlike <u>ExecStop=</u> – commands specified with this setting are
           invoked when a service failed to start up correctly and is shut down again.

           It is recommended to use this setting for clean-up operations that shall be executed
           even when the service failed to start up correctly. Commands configured with this
           setting need to be able to operate even if the service failed starting up half-way and
           left incompletely initialized data around. As the service's processes have been
           terminated already when the commands specified with this setting are executed they
           should not attempt to communicate with them.

           Note that all commands that are configured with this setting are invoked with the
           result code of the service, as well as the main process' exit code and status, set in
           the <u>$SERVICE_RESULT</u>, <u>$EXIT_CODE</u> and <u>$EXIT_STATUS</u> environment variables, see
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5) for details.

       <u>RestartSec=</u>
           Configures the time to sleep before restarting a service (as configured with
           <u>Restart=</u>). Takes a unit-less value in seconds, or a time span value such as "5min
           20s". Defaults to 100ms.

       <u>TimeoutStartSec=</u>
           Configures the time to wait for start-up. If a daemon service does not signal start-up
           completion within the configured time, the service will be considered failed and will
           be shut down again. Takes a unit-less value in seconds, or a time span value such as
           "5min 20s". Pass "infinity" to disable the timeout logic. Defaults to
           <u>DefaultTimeoutStartSec=</u> from the manager configuration file, except when <u>Type=oneshot</u>
           is used, in which case the timeout is disabled by default (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemdsystem.conf.5.html">systemd-</a></b>
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemdsystem.conf.5.html">system.conf</a></b>(5)).

           If a service of <u>Type=notify</u> sends "EXTEND_TIMEOUT_USEC=...", this may cause the start
           time to be extended beyond <u>TimeoutStartSec=</u>. The first receipt of this message must
           occur before <u>TimeoutStartSec=</u> is exceeded, and once the start time has exended beyond
           <u>TimeoutStartSec=</u>, the service manager will allow the service to continue to start,
           provided the service repeats "EXTEND_TIMEOUT_USEC=..."  within the interval specified
           until the service startup status is finished by "READY=1". (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3)).

       <u>TimeoutStopSec=</u>
           Configures the time to wait for stop. If a service is asked to stop, but does not
           terminate in the specified time, it will be terminated forcibly via <b>SIGTERM</b>, and after
           another timeout of equal duration with <b>SIGKILL</b> (see <u>KillMode=</u> in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5)).
           Takes a unit-less value in seconds, or a time span value such as "5min 20s". Pass
           "infinity" to disable the timeout logic. Defaults to <u>DefaultTimeoutStopSec=</u> from the
           manager configuration file (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd-system.conf.5.html">systemd-system.conf</a></b>(5)).

           If a service of <u>Type=notify</u> sends "EXTEND_TIMEOUT_USEC=...", this may cause the stop
           time to be extended beyond <u>TimeoutStopSec=</u>. The first receipt of this message must
           occur before <u>TimeoutStopSec=</u> is exceeded, and once the stop time has exended beyond
           <u>TimeoutStopSec=</u>, the service manager will allow the service to continue to stop,
           provided the service repeats "EXTEND_TIMEOUT_USEC=..."  within the interval specified,
           or terminates itself (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3)).

       <u>TimeoutSec=</u>
           A shorthand for configuring both <u>TimeoutStartSec=</u> and <u>TimeoutStopSec=</u> to the specified
           value.

       <u>RuntimeMaxSec=</u>
           Configures a maximum time for the service to run. If this is used and the service has
           been active for longer than the specified time it is terminated and put into a failure
           state. Note that this setting does not have any effect on <u>Type=oneshot</u> services, as
           they terminate immediately after activation completed. Pass "infinity" (the default)
           to configure no runtime limit.

           If a service of <u>Type=notify</u> sends "EXTEND_TIMEOUT_USEC=...", this may cause the
           runtime to be extended beyond <u>RuntimeMaxSec=</u>. The first receipt of this message must
           occur before <u>RuntimeMaxSec=</u> is exceeded, and once the runtime has exended beyond
           <u>RuntimeMaxSec=</u>, the service manager will allow the service to continue to run,
           provided the service repeats "EXTEND_TIMEOUT_USEC=..."  within the interval specified
           until the service shutdown is acheived by "STOPPING=1" (or termination). (see
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3)).

       <u>WatchdogSec=</u>
           Configures the watchdog timeout for a service. The watchdog is activated when the
           start-up is completed. The service must call <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3) regularly with "WATCHDOG=1"
           (i.e. the "keep-alive ping"). If the time between two such calls is larger than the
           configured time, then the service is placed in a failed state and it will be
           terminated with <b>SIGABRT</b>. By setting <u>Restart=</u> to <b>on-failure</b>, <b>on-watchdog</b>, <b>on-abnormal</b>
           or <b>always</b>, the service will be automatically restarted. The time configured here will
           be passed to the executed service process in the <u>WATCHDOG_USEC=</u> environment variable.
           This allows daemons to automatically enable the keep-alive pinging logic if watchdog
           support is enabled for the service. If this option is used, <u>NotifyAccess=</u> (see below)
           should be set to open access to the notification socket provided by systemd. If
           <u>NotifyAccess=</u> is not set, it will be implicitly set to <b>main</b>. Defaults to 0, which
           disables this feature. The service can check whether the service manager expects
           watchdog keep-alive notifications. See <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_watchdog_enabled.3.html">sd_watchdog_enabled</a></b>(3) for details.
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_event_set_watchdog.3.html">sd_event_set_watchdog</a></b>(3) may be used to enable automatic watchdog notification
           support.

       <u>Restart=</u>
           Configures whether the service shall be restarted when the service process exits, is
           killed, or a timeout is reached. The service process may be the main service process,
           but it may also be one of the processes specified with <u>ExecStartPre=</u>, <u>ExecStartPost=</u>,
           <u>ExecStop=</u>, <u>ExecStopPost=</u>, or <u>ExecReload=</u>. When the death of the process is a result of
           systemd operation (e.g. service stop or restart), the service will not be restarted.
           Timeouts include missing the watchdog "keep-alive ping" deadline and a service start,
           reload, and stop operation timeouts.

           Takes one of <b>no</b>, <b>on-success</b>, <b>on-failure</b>, <b>on-abnormal</b>, <b>on-watchdog</b>, <b>on-abort</b>, or
           <b>always</b>. If set to <b>no</b> (the default), the service will not be restarted. If set to
           <b>on-success</b>, it will be restarted only when the service process exits cleanly. In this
           context, a clean exit means an exit code of 0, or one of the signals <b>SIGHUP</b>, <b>SIGINT</b>,
           <b>SIGTERM</b> or <b>SIGPIPE</b>, and additionally, exit statuses and signals specified in
           <u>SuccessExitStatus=</u>. If set to <b>on-failure</b>, the service will be restarted when the
           process exits with a non-zero exit code, is terminated by a signal (including on core
           dump, but excluding the aforementioned four signals), when an operation (such as
           service reload) times out, and when the configured watchdog timeout is triggered. If
           set to <b>on-abnormal</b>, the service will be restarted when the process is terminated by a
           signal (including on core dump, excluding the aforementioned four signals), when an
           operation times out, or when the watchdog timeout is triggered. If set to <b>on-abort</b>,
           the service will be restarted only if the service process exits due to an uncaught
           signal not specified as a clean exit status. If set to <b>on-watchdog</b>, the service will
           be restarted only if the watchdog timeout for the service expires. If set to <b>always</b>,
           the service will be restarted regardless of whether it exited cleanly or not, got
           terminated abnormally by a signal, or hit a timeout.

           <b>Table</b> <b>2.</b> <b>Exit</b> <b>causes</b> <b>and</b> <b>the</b> <b>effect</b> <b>of</b> <b>the</b> <u>Restart=</u> settings on them
           ┌──────────────┬────┬────────┬────────────┬────────────┬─────────────┬──────────┬─────────────┐
           │<b>Restart</b>       │ <b>no</b> │ <b>always</b> │ <b>on-success</b> │ <b>on-failure</b> │ <b>on-abnormal</b> │ <b>on-abort</b> │ <b>on-watchdog</b> │
           │<b>settings/Exit</b> │    │        │            │            │             │          │             │
           │<b>causes</b>        │    │        │            │            │             │          │             │
           ├──────────────┼────┼────────┼────────────┼────────────┼─────────────┼──────────┼─────────────┤
           │Clean exit    │    │ X      │ X          │            │             │          │             │
           │code or       │    │        │            │            │             │          │             │
           │signal        │    │        │            │            │             │          │             │
           ├──────────────┼────┼────────┼────────────┼────────────┼─────────────┼──────────┼─────────────┤
           │Unclean exit  │    │ X      │            │ X          │             │          │             │
           │code          │    │        │            │            │             │          │             │
           ├──────────────┼────┼────────┼────────────┼────────────┼─────────────┼──────────┼─────────────┤
           │Unclean       │    │ X      │            │ X          │ X           │ X        │             │
           │signal        │    │        │            │            │             │          │             │
           ├──────────────┼────┼────────┼────────────┼────────────┼─────────────┼──────────┼─────────────┤
           │Timeout       │    │ X      │            │ X          │ X           │          │             │
           ├──────────────┼────┼────────┼────────────┼────────────┼─────────────┼──────────┼─────────────┤
           │Watchdog      │    │ X      │            │ X          │ X           │          │ X           │
           └──────────────┴────┴────────┴────────────┴────────────┴─────────────┴──────────┴─────────────┘
           As exceptions to the setting above, the service will not be restarted if the exit code
           or signal is specified in <u>RestartPreventExitStatus=</u> (see below) or the service is
           stopped with <b>systemctl</b> <b>stop</b> or an equivalent operation. Also, the services will always
           be restarted if the exit code or signal is specified in <u>RestartForceExitStatus=</u> (see
           below).

           Note that service restart is subject to unit start rate limiting configured with
           <u>StartLimitIntervalSec=</u> and <u>StartLimitBurst=</u>, see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.unit.5.html">systemd.unit</a></b>(5) for details. A
           restarted service enters the failed state only after the start limits are reached.

           Setting this to <b>on-failure</b> is the recommended choice for long-running services, in
           order to increase reliability by attempting automatic recovery from errors. For
           services that shall be able to terminate on their own choice (and avoid immediate
           restarting), <b>on-abnormal</b> is an alternative choice.

       <u>SuccessExitStatus=</u>
           Takes a list of exit status definitions that, when returned by the main service
           process, will be considered successful termination, in addition to the normal
           successful exit code 0 and the signals <b>SIGHUP</b>, <b>SIGINT</b>, <b>SIGTERM</b>, and <b>SIGPIPE</b>. Exit
           status definitions can either be numeric exit codes or termination signal names,
           separated by spaces. For example:

               SuccessExitStatus=1 2 8 SIGKILL

           ensures that exit codes 1, 2, 8 and the termination signal <b>SIGKILL</b> are considered
           clean service terminations.

           This option may appear more than once, in which case the list of successful exit
           statuses is merged. If the empty string is assigned to this option, the list is reset,
           all prior assignments of this option will have no effect.

       <u>RestartPreventExitStatus=</u>
           Takes a list of exit status definitions that, when returned by the main service
           process, will prevent automatic service restarts, regardless of the restart setting
           configured with <u>Restart=</u>. Exit status definitions can either be numeric exit codes or
           termination signal names, and are separated by spaces. Defaults to the empty list, so
           that, by default, no exit status is excluded from the configured restart logic. For
           example:

               RestartPreventExitStatus=1 6 SIGABRT

           ensures that exit codes 1 and 6 and the termination signal <b>SIGABRT</b> will not result in
           automatic service restarting. This option may appear more than once, in which case the
           list of restart-preventing statuses is merged. If the empty string is assigned to this
           option, the list is reset and all prior assignments of this option will have no
           effect.

       <u>RestartForceExitStatus=</u>
           Takes a list of exit status definitions that, when returned by the main service
           process, will force automatic service restarts, regardless of the restart setting
           configured with <u>Restart=</u>. The argument format is similar to <u>RestartPreventExitStatus=</u>.

       <u>PermissionsStartOnly=</u>
           Takes a boolean argument. If true, the permission-related execution options, as
           configured with <u>User=</u> and similar options (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5) for more information),
           are only applied to the process started with <u>ExecStart=</u>, and not to the various other
           <u>ExecStartPre=</u>, <u>ExecStartPost=</u>, <u>ExecReload=</u>, <u>ExecStop=</u>, and <u>ExecStopPost=</u> commands. If
           false, the setting is applied to all configured commands the same way. Defaults to
           false.

       <u>RootDirectoryStartOnly=</u>
           Takes a boolean argument. If true, the root directory, as configured with the
           <u>RootDirectory=</u> option (see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5) for more information), is only applied to
           the process started with <u>ExecStart=</u>, and not to the various other <u>ExecStartPre=</u>,
           <u>ExecStartPost=</u>, <u>ExecReload=</u>, <u>ExecStop=</u>, and <u>ExecStopPost=</u> commands. If false, the
           setting is applied to all configured commands the same way. Defaults to false.

       <u>NonBlocking=</u>
           Set the <b>O_NONBLOCK</b> flag for all file descriptors passed via socket-based activation.
           If true, all file descriptors &gt;= 3 (i.e. all except stdin, stdout, stderr), excluding
           those passed in via the file descriptor storage logic (see <u>FileDescriptorStoreMax=</u> for
           details), will have the <b>O_NONBLOCK</b> flag set and hence are in non-blocking mode. This
           option is only useful in conjunction with a socket unit, as described in
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.socket.5.html">systemd.socket</a></b>(5) and has no effect on file descriptors which were previously saved in
           the file-descriptor store for example. Defaults to false.

       <u>NotifyAccess=</u>
           Controls access to the service status notification socket, as accessible via the
           <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3) call. Takes one of <b>none</b> (the default), <b>main</b>, <b>exec</b> or <b>all</b>. If <b>none</b>, no
           daemon status updates are accepted from the service processes, all status update
           messages are ignored. If <b>main</b>, only service updates sent from the main process of the
           service are accepted. If <b>exec</b>, only service updates sent from any of the main or
           control processes originating from one of the <u>Exec*=</u> commands are accepted. If <b>all</b>,
           all services updates from all members of the service's control group are accepted.
           This option should be set to open access to the notification socket when using
           <u>Type=notify</u> or <u>WatchdogSec=</u> (see above). If those options are used but <u>NotifyAccess=</u>
           is not configured, it will be implicitly set to <b>main</b>.

           Note that <b>sd_notify()</b> notifications may be attributed to units correctly only if
           either the sending process is still around at the time PID 1 processes the message, or
           if the sending process is explicitly runtime-tracked by the service manager. The
           latter is the case if the service manager originally forked off the process, i.e. on
           all processes that match <b>main</b> or <b>exec</b>. Conversely, if an auxiliary process of the unit
           sends an <b>sd_notify()</b> message and immediately exits, the service manager might not be
           able to properly attribute the message to the unit, and thus will ignore it, even if
           <u>NotifyAccess=</u><b>all</b> is set for it.

       <u>Sockets=</u>
           Specifies the name of the socket units this service shall inherit socket file
           descriptors from when the service is started. Normally, it should not be necessary to
           use this setting, as all socket file descriptors whose unit shares the same name as
           the service (subject to the different unit name suffix of course) are passed to the
           spawned process.

           Note that the same socket file descriptors may be passed to multiple processes
           simultaneously. Also note that a different service may be activated on incoming socket
           traffic than the one which is ultimately configured to inherit the socket file
           descriptors. Or, in other words: the <u>Service=</u> setting of .socket units does not have
           to match the inverse of the <u>Sockets=</u> setting of the .service it refers to.

           This option may appear more than once, in which case the list of socket units is
           merged. If the empty string is assigned to this option, the list of sockets is reset,
           and all prior uses of this setting will have no effect.

       <u>FileDescriptorStoreMax=</u>
           Configure how many file descriptors may be stored in the service manager for the
           service using <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_pid_notify_with_fds.3.html">sd_pid_notify_with_fds</a></b>(3)'s "FDSTORE=1" messages. This is useful for
           implementing services that can restart after an explicit request or a crash without
           losing state. Any open sockets and other file descriptors which should not be closed
           during the restart may be stored this way. Application state can either be serialized
           to a file in <a href="file:///run">/run</a>, or better, stored in a <b><a href="http://manpages.ubuntu.com/manpages/bionic/man2/memfd_create.2.html">memfd_create</a></b>(2) memory file descriptor.
           Defaults to 0, i.e. no file descriptors may be stored in the service manager. All file
           descriptors passed to the service manager from a specific service are passed back to
           the service's main process on the next service restart. Any file descriptors passed to
           the service manager are automatically closed when <b>POLLHUP</b> or <b>POLLERR</b> is seen on them,
           or when the service is fully stopped and no job is queued or being executed for it.

       <u>USBFunctionDescriptors=</u>
           Configure the location of a file containing <b>USB</b> <b>FunctionFS</b>[2] descriptors, for
           implementation of USB gadget functions. This is used only in conjunction with a socket
           unit with <u>ListenUSBFunction=</u> configured. The contents of this file are written to the
           ep0 file after it is opened.

       <u>USBFunctionStrings=</u>
           Configure the location of a file containing USB FunctionFS strings. Behavior is
           similar to <u>USBFunctionDescriptors=</u> above.

       Check <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5) and <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) for more settings.

</pre><h4 id="command lines"><b>COMMAND</b> <b>LINES</b></h4><pre>       This section describes command line parsing and variable and specifier substitutions for
       <u>ExecStart=</u>, <u>ExecStartPre=</u>, <u>ExecStartPost=</u>, <u>ExecReload=</u>, <u>ExecStop=</u>, and <u>ExecStopPost=</u>
       options.

       Multiple command lines may be concatenated in a single directive by separating them with
       semicolons (these semicolons must be passed as separate words). Lone semicolons may be
       escaped as "\;".

       Each command line is split on whitespace, with the first item being the command to
       execute, and the subsequent items being the arguments. Double quotes ("...") and single
       quotes ('...') may be used to wrap a whole item (the opening quote may appear only at the
       beginning or after whitespace that is not quoted, and the closing quote must be followed
       by whitespace or the end of line), in which case everything until the next matching quote
       becomes part of the same argument. Quotes themselves are removed. C-style escapes are also
       supported. The table below contains the list of known escape patterns. Only escape
       patterns which match the syntax in the table are allowed; other patterns may be added in
       the future and unknown patterns will result in a warning. In particular, any backslashes
       should be doubled. Finally, a trailing backslash ("\") may be used to merge lines.

       This syntax is inspired by shell syntax, but only the meta-characters and expansions
       described in the following paragraphs are understood, and the expansion of variables is
       different. Specifically, redirection using "&lt;", "&lt;&lt;", "&gt;", and "&gt;&gt;", pipes using "|",
       running programs in the background using "&amp;", and <u>other</u> <u>elements</u> <u>of</u> <u>shell</u> <u>syntax</u> <u>are</u> <u>not</u>
       <u>supported</u>.

       The command to execute must be an absolute path name. It may contain spaces, but control
       characters are not allowed.

       The command line accepts "%" specifiers as described in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.unit.5.html">systemd.unit</a></b>(5). Note that the
       first argument of the command line (i.e. the program to execute) may not include
       specifiers.

       Basic environment variable substitution is supported. Use "${FOO}" as part of a word, or
       as a word of its own, on the command line, in which case it will be replaced by the value
       of the environment variable including all whitespace it contains, resulting in a single
       argument. Use "$FOO" as a separate word on the command line, in which case it will be
       replaced by the value of the environment variable split at whitespace, resulting in zero
       or more arguments. For this type of expansion, quotes are respected when splitting into
       words, and afterwards removed.

       Example:

           Environment="ONE=one" 'TWO=two two'
           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> $ONE $TWO ${TWO}

       This will execute <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a></b> with four arguments: "one", "two", "two", and "two two".

       Example:

           Environment=ONE='one' "TWO='two two' too" THREE=
           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> ${ONE} ${TWO} ${THREE}
           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> $ONE $TWO $THREE

       This results in echo being called twice, the first time with arguments "'one'",
       "'two two' too", "", and the second time with arguments "one", "two two", "too".

       To pass a literal dollar sign, use "$$". Variables whose value is not known at expansion
       time are treated as empty strings. Note that the first argument (i.e. the program to
       execute) may not be a variable.

       Variables to be used in this fashion may be defined through <u>Environment=</u> and
       <u>EnvironmentFile=</u>. In addition, variables listed in the section "Environment variables in
       spawned processes" in <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5), which are considered "static configuration", may be
       used (this includes e.g.  <u>$USER</u>, but not <u>$TERM</u>).

       Note that shell command lines are not directly supported. If shell command lines are to be
       used, they need to be passed explicitly to a shell implementation of some kind. Example:

           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sh">/bin/sh</a> -c 'dmesg | tac'

       Example:

           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> one ; <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> "two two"

       This will execute <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a></b> two times, each time with one argument: "one" and "two two",
       respectively. Because two commands are specified, <u>Type=oneshot</u> must be used.

       Example:

           ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a> / &gt;/dev/null &amp; \; \
           <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?ls">/bin/ls</a>

       This will execute <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/bin/echo</a></b> with five arguments: "/", "&gt;/dev/null", "&amp;", ";", and
       "<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?ls">/bin/ls</a>".

       <b>Table</b> <b>3.</b> <b>C</b> <b>escapes</b> <b>supported</b> <b>in</b> <b>command</b> <b>lines</b> <b>and</b> <b>environment</b> <b>variables</b>
       ┌────────┬───────────────────────────────┐
       │<b>Literal</b> │ <b>Actual</b> <b>value</b>                  │
       ├────────┼───────────────────────────────┤
       │"\a"    │ bell                          │
       ├────────┼───────────────────────────────┤
       │"\b"    │ backspace                     │
       ├────────┼───────────────────────────────┤
       │"\f"    │ form feed                     │
       ├────────┼───────────────────────────────┤
       │"\n"    │ newline                       │
       ├────────┼───────────────────────────────┤
       │"\r"    │ carriage return               │
       ├────────┼───────────────────────────────┤
       │"\t"    │ tab                           │
       ├────────┼───────────────────────────────┤
       │"\v"    │ vertical tab                  │
       ├────────┼───────────────────────────────┤
       │"\\"    │ backslash                     │
       ├────────┼───────────────────────────────┤
       │"\""    │ double quotation mark         │
       ├────────┼───────────────────────────────┤
       │"\'"    │ single quotation mark         │
       ├────────┼───────────────────────────────┤
       │"\s"    │ space                         │
       ├────────┼───────────────────────────────┤
       │"\x<u>xx</u>"  │ character number <u>xx</u> in        │
       │        │ hexadecimal encoding          │
       ├────────┼───────────────────────────────┤
       │"\<u>nnn</u>"  │ character number <u>nnn</u> in octal │
       │        │ encoding                      │
       └────────┴───────────────────────────────┘

</pre><h4 id="examples"><b>EXAMPLES</b></h4><pre>       <b>Example</b> <b>1.</b> <b>Simple</b> <b>service</b>

       The following unit file creates a service that will execute /usr/sbin/foo-daemon. Since no
       <u>Type=</u> is specified, the default <u>Type=</u><b>simple</b> will be assumed. systemd will assume the unit
       to be started immediately after the program has begun executing.

           [Unit]
           Description=Foo

           [Service]
           ExecStart=/usr/sbin/foo-daemon

           [Install]
           WantedBy=multi-user.target

       Note that systemd assumes here that the process started by systemd will continue running
       until the service terminates. If the program daemonizes itself (i.e. forks), please use
       <u>Type=</u><b>forking</b> instead.

       Since no <u>ExecStop=</u> was specified, systemd will send SIGTERM to all processes started from
       this service, and after a timeout also SIGKILL. This behavior can be modified, see
       <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) for details.

       Note that this unit type does not include any type of notification when a service has
       completed initialization. For this, you should use other unit types, such as <u>Type=</u><b>notify</b>
       if the service understands systemd's notification protocol, <u>Type=</u><b>forking</b> if the service
       can background itself or <u>Type=</u><b>dbus</b> if the unit acquires a DBus name once initialization is
       complete. See below.

       <b>Example</b> <b>2.</b> <b>Oneshot</b> <b>service</b>

       Sometimes, units should just execute an action without keeping active processes, such as a
       filesystem check or a cleanup action on boot. For this, <u>Type=</u><b>oneshot</b> exists. Units of this
       type will wait until the process specified terminates and then fall back to being
       inactive. The following unit will perform a cleanup action:

           [Unit]
           Description=Cleanup old Foo data

           [Service]
           Type=oneshot
           ExecStart=/usr/sbin/foo-cleanup

           [Install]
           WantedBy=multi-user.target

       Note that systemd will consider the unit to be in the state "starting" until the program
       has terminated, so ordered dependencies will wait for the program to finish before
       starting themselves. The unit will revert to the "inactive" state after the execution is
       done, never reaching the "active" state. That means another request to start the unit will
       perform the action again.

       <u>Type=</u><b>oneshot</b> are the only service units that may have more than one <u>ExecStart=</u> specified.
       They will be executed in order until either they are all successful or one of them fails.

       <b>Example</b> <b>3.</b> <b>Stoppable</b> <b>oneshot</b> <b>service</b>

       Similarly to the oneshot services, there are sometimes units that need to execute a
       program to set up something and then execute another to shut it down, but no process
       remains active while they are considered "started". Network configuration can sometimes
       fall into this category. Another use case is if a oneshot service shall not be executed
       each time when they are pulled in as a dependency, but only the first time.

       For this, systemd knows the setting <u>RemainAfterExit=</u><b>yes</b>, which causes systemd to consider
       the unit to be active if the start action exited successfully. This directive can be used
       with all types, but is most useful with <u>Type=</u><b>oneshot</b> and <u>Type=</u><b>simple</b>. With <u>Type=</u><b>oneshot</b>,
       systemd waits until the start action has completed before it considers the unit to be
       active, so dependencies start only after the start action has succeeded. With <u>Type=</u><b>simple</b>,
       dependencies will start immediately after the start action has been dispatched. The
       following unit provides an example for a simple static firewall.

           [Unit]
           Description=Simple firewall

           [Service]
           Type=oneshot
           RemainAfterExit=yes
           ExecStart=/usr/local/sbin/simple-firewall-start
           ExecStop=/usr/local/sbin/simple-firewall-stop

           [Install]
           WantedBy=multi-user.target

       Since the unit is considered to be running after the start action has exited, invoking
       <b>systemctl</b> <b>start</b> on that unit again will cause no action to be taken.

       <b>Example</b> <b>4.</b> <b>Traditional</b> <b>forking</b> <b>services</b>

       Many traditional daemons/services background (i.e. fork, daemonize) themselves when
       starting. Set <u>Type=</u><b>forking</b> in the service's unit file to support this mode of operation.
       systemd will consider the service to be in the process of initialization while the
       original program is still running. Once it exits successfully and at least a process
       remains (and <u>RemainAfterExit=</u><b>no</b>), the service is considered started.

       Often, a traditional daemon only consists of one process. Therefore, if only one process
       is left after the original process terminates, systemd will consider that process the main
       process of the service. In that case, the <u>$MAINPID</u> variable will be available in
       <u>ExecReload=</u>, <u>ExecStop=</u>, etc.

       In case more than one process remains, systemd will be unable to determine the main
       process, so it will not assume there is one. In that case, <u>$MAINPID</u> will not expand to
       anything. However, if the process decides to write a traditional PID file, systemd will be
       able to read the main PID from there. Please set <u>PIDFile=</u> accordingly. Note that the
       daemon should write that file before finishing with its initialization. Otherwise, systemd
       might try to read the file before it exists.

       The following example shows a simple daemon that forks and just starts one process in the
       background:

           [Unit]
           Description=Some simple daemon

           [Service]
           Type=forking
           ExecStart=/usr/sbin/my-simple-daemon -d

           [Install]
           WantedBy=multi-user.target

       Please see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) for details on how you can influence the way systemd terminates
       the service.

       <b>Example</b> <b>5.</b> <b>DBus</b> <b>services</b>

       For services that acquire a name on the DBus system bus, use <u>Type=</u><b>dbus</b> and set <u>BusName=</u>
       accordingly. The service should not fork (daemonize). systemd will consider the service to
       be initialized once the name has been acquired on the system bus. The following example
       shows a typical DBus service:

           [Unit]
           Description=Simple DBus service

           [Service]
           Type=dbus
           BusName=org.example.simple-dbus-service
           ExecStart=/usr/sbin/simple-dbus-service

           [Install]
           WantedBy=multi-user.target

       For <u>bus-activatable</u> services, do not include a "[Install]" section in the systemd service
       file, but use the <u>SystemdService=</u> option in the corresponding DBus service file, for
       example (/usr/share/dbus-1/system-services/org.example.simple-dbus-service.service):

           [D-BUS Service]
           Name=org.example.simple-dbus-service
           Exec=/usr/sbin/simple-dbus-service
           User=root
           SystemdService=simple-dbus-service.service

       Please see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) for details on how you can influence the way systemd terminates
       the service.

       <b>Example</b> <b>6.</b> <b>Services</b> <b>that</b> <b>notify</b> <b>systemd</b> <b>about</b> <b>their</b> <b>initialization</b>

       <u>Type=</u><b>simple</b> services are really easy to write, but have the major disadvantage of systemd
       not being able to tell when initialization of the given service is complete. For this
       reason, systemd supports a simple notification protocol that allows daemons to make
       systemd aware that they are done initializing. Use <u>Type=</u><b>notify</b> for this. A typical service
       file for such a daemon would look like this:

           [Unit]
           Description=Simple notifying service

           [Service]
           Type=notify
           ExecStart=/usr/sbin/simple-notifying-service

           [Install]
           WantedBy=multi-user.target

       Note that the daemon has to support systemd's notification protocol, else systemd will
       think the service has not started yet and kill it after a timeout. For an example of how
       to update daemons to support this protocol transparently, take a look at <b><a href="http://manpages.ubuntu.com/manpages/bionic/man3/sd_notify.3.html">sd_notify</a></b>(3).
       systemd will consider the unit to be in the 'starting' state until a readiness
       notification has arrived.

       Please see <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5) for details on how you can influence the way systemd terminates
       the service.

</pre><h4 id="see also"><b>SEE</b> <b>ALSO</b></h4><pre>       <b><a href="http://manpages.ubuntu.com/manpages/bionic/man1/systemd.1.html">systemd</a></b>(1), <b><a href="http://manpages.ubuntu.com/manpages/bionic/man1/systemctl.1.html">systemctl</a></b>(1), <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.unit.5.html">systemd.unit</a></b>(5), <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.exec.5.html">systemd.exec</a></b>(5), <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5),
       <b><a href="http://manpages.ubuntu.com/manpages/bionic/man5/systemd.kill.5.html">systemd.kill</a></b>(5), <b><a href="http://manpages.ubuntu.com/manpages/bionic/man7/systemd.directives.7.html">systemd.directives</a></b>(7)

</pre><h4 id="notes"><b>NOTES</b></h4><pre>        1. Incompatibilities with SysV
           https://www.freedesktop.org/wiki/Software/systemd/Incompatibilities

        2. USB FunctionFS
           https://www.kernel.org/doc/Documentation/usb/functionfs.txt
</pre>

        </div>
      </div></section>
    </div>
    <footer class="p-strip is-shallow">
      <div class="row">
        <p>Powered by the <a href="https://launchpad.net/ubuntu-manpage-repository">Ubuntu Manpage Repository</a>, file bugs in <a href="https://bugs.launchpad.net/ubuntu-manpage-repository/+filebug">Launchpad</a></p>
        <p>© 2019 Canonical Ltd. Ubuntu and Canonical are registered trademarks of Canonical Ltd.</p>
      </div>
    </footer>
    <script src="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/functions.js"></script><script src="Ubuntu%20Manpage%20%20systemd.service%20-%20Service%20unit%20configuration_files/ga.js" type="text/javascript"></script>
  


<script data-no-instant>document.write('<script src="/livereload.js?port=80&mindelay=10&v=2"></' + 'script>')</script></body></html>